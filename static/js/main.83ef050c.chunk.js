(this.webpackJsonpperview=this.webpackJsonpperview||[]).push([[0],{12:function(e,t,n){e.exports=n(21)},19:function(e,t,n){},20:function(e,t,n){},21:function(e,t,n){"use strict";n.r(t);var r=n(6),a=n.n(r),o=n(10),i=n.n(o),c=(n(19),n(11)),s=n(0),l=n(5),u=n(3),d=n(4),v=function(e){Object(d.a)(Position,e);var t=Object(u.a)(Position);function Position(){var e;Object(s.a)(this,Position);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).x=0,e.y=0,e}return Position}(l.a);v.schema={x:{type:l.d.Number},y:{type:l.d.Number}};var m=v,f=function(e){Object(d.a)(Renderable,e);var t=Object(u.a)(Renderable);function Renderable(){return Object(s.a)(this,Renderable),t.apply(this,arguments)}return Renderable}(l.c),h=n(1),b=function(e){Object(d.a)(Selectable,e);var t=Object(u.a)(Selectable);function Selectable(){var e;Object(s.a)(this,Selectable);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).selected=!1,e.toggle=function(){e.selected=!e.selected},e}return Selectable}(l.a);b.schema={selected:{type:l.d.Boolean}};var p=b,g=function(e){Object(d.a)(Renderer,e);var t=Object(u.a)(Renderer);function Renderer(e,n){var r,a=n.canvas,o=n.priority;return Object(s.a)(this,Renderer),(r=t.call(this,e,{priority:o})).canvas=void 0,r.drawCircle=function(e){var t=e.x,n=e.y,a=e.selected,o=r.canvas.getContext("2d");o&&(o.fillStyle="#888",o.beginPath(),o.arc(t,n,10,0,2*Math.PI,!1),o.fill(),o.lineWidth=1,o.strokeStyle=a?"#F22":"#222",o.stroke())},r.canvas=a,r}return Object(h.a)(Renderer,[{key:"execute",value:function execute(e,t){var n=this;this.queries.renderables.results.forEach((function(e){var t,r=e.getComponent(m),a=r.x,o=r.y,i=(null!==(t=e.getComponent(p))&&void 0!==t?t:{selected:!1}).selected;n.drawCircle({x:a,y:o,selected:i})}))}}]),Renderer}(l.b);g.queries={renderables:{components:[f,m]}};var w=g,y=function(e){Object(d.a)(SelectionToggler,e);var t=Object(u.a)(SelectionToggler);function SelectionToggler(){var e;Object(s.a)(this,SelectionToggler);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).onMouseDown=function(t){var n=t.clientX,r=t.clientY;e.queries.selectables.results.forEach((function(e){var t=e.getComponent(m),a=t.x,o=t.y,i=a-n,c=o-r;Math.sqrt(i*i+c*c)<=10&&e.getMutableComponent(p).toggle()}))},e}return Object(h.a)(SelectionToggler,[{key:"execute",value:function execute(e,t){}}]),SelectionToggler}(l.b);y.queries={selectables:{components:[p,m]}};var j=y,O=function Game(e){var t=this,n=e.canvas;Object(s.a)(this,Game),this.world=void 0,this.canvas=void 0,this.lastTime=void 0,this.animationFrameRequest=void 0,this.start=function(){for(var e=0;e<10;e++)t.world.createEntity().addComponent(m,{x:50*e,y:50*e}).addComponent(p).addComponent(f);t.run()},this.stop=function(){t.animationFrameRequest&&cancelAnimationFrame(t.animationFrameRequest)},this.onMouseDown=function(e){0===e.button&&t.world.getSystem(j).onMouseDown(e)},this.run=function(){var e=performance.now(),n=e-t.lastTime;t.world.execute(n,e),t.lastTime=e,t.animationFrameRequest=requestAnimationFrame(t.run)},this.canvas=n,this.lastTime=performance.now(),this.animationFrameRequest=null,this.world=(new l.e).registerSystem(w,{canvas:n}).registerSystem(j).registerComponent(m).registerComponent(p).registerComponent(f)},R=(n(20),function App(){var e=a.a.useState(null),t=Object(c.a)(e,2),n=t[0],r=t[1],o=a.a.useRef(null);a.a.useEffect((function(){if(n)return o.current=new O({canvas:n}),o.current.start(),function(){var e;null===(e=o.current)||void 0===e||e.stop(),o.current=null}}),[n]),a.a.useEffect((function(){var e=function handleResize(){n&&(n.width=window.innerWidth,n.height=window.innerHeight)};return e(),window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[n]);return a.a.createElement("div",{className:"App"},a.a.createElement("canvas",{ref:r,onMouseDown:function onMouseDown(e){var t;null===(t=o.current)||void 0===t||t.onMouseDown(e)}}))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(R,null)),document.getElementById("root")),function unregister(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}()}},[[12,1,2]]]);
//# sourceMappingURL=main.83ef050c.chunk.js.map