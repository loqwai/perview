(this.webpackJsonpperview=this.webpackJsonpperview||[]).push([[0],{12:function(e,t,n){e.exports=n(19)},17:function(e,t,n){},18:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var r=n(6),a=n.n(r),o=n(10),i=n.n(o),c=(n(17),n(11)),s=n(0),u=n(5),l=n(3),v=n(4),d=function(e){Object(v.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).x=0,e.y=0,e}return n}(u.a);d.schema={x:{type:u.d.Number},y:{type:u.d.Number}};var f=d,h=function(e){Object(v.a)(n,e);var t=Object(l.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return n}(u.c),m=n(1),p=function(e){Object(v.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).selected=!1,e.toggle=function(){e.selected=!e.selected},e}return n}(u.a);p.schema={selected:{type:u.d.Boolean}};var w=p,b=function(e){Object(v.a)(n,e);var t=Object(l.a)(n);function n(e,r){var a,o=r.canvas,i=r.priority;return Object(s.a)(this,n),(a=t.call(this,e,{priority:i})).canvas=void 0,a.drawCircle=function(e){var t=e.x,n=e.y,r=e.selected,o=a.canvas.getContext("2d");o&&(o.fillStyle="#888",o.beginPath(),o.arc(t,n,10,0,2*Math.PI,!1),o.fill(),o.lineWidth=1,o.strokeStyle=r?"#F22":"#222",o.stroke())},a.canvas=o,a}return Object(m.a)(n,[{key:"execute",value:function(e,t){var n=this;this.queries.renderables.results.forEach((function(e){var t,r=e.getComponent(f),a=r.x,o=r.y,i=(null!==(t=e.getComponent(w))&&void 0!==t?t:{selected:!1}).selected;n.drawCircle({x:a,y:o,selected:i})}))}}]),n}(u.b);b.queries={renderables:{components:[h,f]}};var y=b,g=function(e){Object(v.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onMouseDown=function(t){var n=t.clientX,r=t.clientY;e.queries.selectables.results.forEach((function(e){var t=e.getComponent(f),a=t.x,o=t.y,i=a-n,c=o-r;Math.sqrt(i*i+c*c)<=10&&e.getMutableComponent(w).toggle()}))},e}return Object(m.a)(n,[{key:"execute",value:function(e,t){}}]),n}(u.b);g.queries={selectables:{components:[w,f]}};var j=g,O=function e(t){var n=this,r=t.canvas;Object(s.a)(this,e),this.world=void 0,this.canvas=void 0,this.lastTime=void 0,this.animationFrameRequest=void 0,this.start=function(){for(var e=0;e<10;e++)n.world.createEntity().addComponent(f,{x:50*e,y:50*e}).addComponent(w).addComponent(h);n.run()},this.stop=function(){n.animationFrameRequest&&cancelAnimationFrame(n.animationFrameRequest)},this.onMouseDown=function(e){0===e.button&&n.world.getSystem(j).onMouseDown(e)},this.run=function(){var e=performance.now(),t=e-n.lastTime;n.world.execute(t,e),n.lastTime=e,n.animationFrameRequest=requestAnimationFrame(n.run)},this.canvas=r,this.lastTime=performance.now(),this.animationFrameRequest=null,this.world=(new u.e).registerSystem(y,{canvas:r}).registerSystem(j).registerComponent(f).registerComponent(w).registerComponent(h)},C=(n(18),function(){var e=a.a.useState(null),t=Object(c.a)(e,2),n=t[0],r=t[1],o=a.a.useRef(null);a.a.useEffect((function(){if(n)return o.current=new O({canvas:n}),o.current.start(),function(){var e;null===(e=o.current)||void 0===e||e.stop(),o.current=null}}),[n]),a.a.useEffect((function(){var e=function(){n&&(n.width=window.innerWidth,n.height=window.innerHeight)};return e(),window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[n]);return a.a.createElement("div",{className:"App"},a.a.createElement("canvas",{ref:r,onMouseDown:function(e){var t;null===(t=o.current)||void 0===t||t.onMouseDown(e)}}))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[12,1,2]]]);
//# sourceMappingURL=main.b03145b0.chunk.js.map