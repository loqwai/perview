(this.webpackJsonpperview=this.webpackJsonpperview||[]).push([[0],{30:function(e,t,n){e.exports=n(39)},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var o=n(7),r=n.n(o),a=n(27),i=n.n(a),c=(n(37),n(29)),s=n(45),u=n(0),l=n(1),p=function Vector2(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(u.a)(this,Vector2),this.x=void 0,this.y=void 0,this.set=function(t,n){return e.x=t,e.y=n,e},this.copy=function(t){return e.x=t.x,e.y=t.y,e},this.clone=function(){return(new Vector2).copy(e)},this.add=function(t){return e.clone().addMut(t)},this.addMut=function(t){return e.x+=t.x,e.y+=t.y,e},this.limit=function(t){return e.clone().limitMut(t)},this.limitMut=function(t){var n=e.magnitude();return t<n&&e.divideScalarMut(n/t),e},this.divideScalar=function(t){return e.clone().divideScalarMut(t)},this.divideScalarMut=function(t){return e.x/=t,e.y/=t,e},this.magnitude=function(){return Math.sqrt(e.x*e.x+e.y*e.y)},this.multiplyScalar=function(t){return e.clone().multiplyScalarMut(t)},this.multiplyScalarMut=function(t){return e.x*=t,e.y*=t,e},this.toJSON=function(t){var n=e.x,o=e.y;return JSON.stringify({x:n,y:o},null,null!==t&&void 0!==t?t:0)},this.subtract=function(t){return e.clone().subtractMut(t)},this.subtractMut=function(t){return e.x-=t.x,e.y-=t.y,e},this.unit=function(){return e.clone().unitMut()},this.unitMut=function(){var t=e.magnitude();return 0===t?e.multiplyScalar(0):e.divideScalarMut(t)},this.x=t,this.y=n},m=p,d=Object(l.h)({name:"Vector2",default:new p,copy:l.g,clone:l.f}),f=n(2),h=n(3),v=function(e){Object(h.a)(Attack,e);var t=Object(f.a)(Attack);function Attack(){var e;Object(u.a)(this,Attack);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).projectileColor="#000000",e.projectileSpeed=0,e.projectileLifetime=0,e.projectileDamage=0,e.minimumRefactoryPeriod=0,e.lastAttack=0,e}return Attack}(l.a);v.schema={projectileColor:{type:l.d.String},projectileSpeed:{type:l.d.Number},projectileLifetime:{type:l.d.Number},projectileDamage:{type:l.d.Number},minimumRefactoryPeriod:{type:l.d.Number},lastAttack:{type:l.d.Number}};var g=v,b=function(e){Object(h.a)(Circle,e);var t=Object(f.a)(Circle);function Circle(){var e;Object(u.a)(this,Circle);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).color="#000000",e.radius=0,e}return Circle}(l.a);b.schema={color:{type:l.d.String},radius:{type:l.d.Number}};var y=b,C=function(e){Object(h.a)(Collidable,e);var t=Object(f.a)(Collidable);function Collidable(){return Object(u.a)(this,Collidable),t.apply(this,arguments)}return Collidable}(l.c),S=function(e){Object(h.a)(Destination,e);var t=Object(f.a)(Destination);function Destination(){var e;Object(u.a)(this,Destination);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).position=new m,e}return Destination}(l.a);S.schema={position:{type:d}};var j=S,w=function(e){Object(h.a)(DestroyedOnImpact,e);var t=Object(f.a)(DestroyedOnImpact);function DestroyedOnImpact(){return Object(u.a)(this,DestroyedOnImpact),t.apply(this,arguments)}return DestroyedOnImpact}(l.c),O=function(e){Object(h.a)(Lifespan,e);var t=Object(f.a)(Lifespan);function Lifespan(){var e;Object(u.a)(this,Lifespan);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).ttl=0,e.createdAt=0,e}return Lifespan}(l.a);O.schema={ttl:{type:l.d.Number},createdAt:{type:l.d.Number}};var M=O,x=function(e){Object(h.a)(Moveable,e);var t=Object(f.a)(Moveable);function Moveable(){var e;Object(u.a)(this,Moveable);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).direction=new m,e.maxSpeed=0,e.minSeparation=0,e.separation=0,e}return Moveable}(l.a);x.schema={direction:{type:d},maxSpeed:{type:l.d.Number},minSeparation:{type:l.d.Number},separation:{type:l.d.Number}};var D=x,E=function(e){Object(h.a)(RectangleSelection,e);var t=Object(f.a)(RectangleSelection);function RectangleSelection(){var e;Object(u.a)(this,RectangleSelection);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).startPosition=new m,e.endPosition=new m,e}return RectangleSelection}(l.a);E.schema={startPosition:{type:d},endPosition:{type:d}};var A=E,k=function(e){Object(h.a)(Selectable,e);var t=Object(f.a)(Selectable);function Selectable(){var e;Object(u.a)(this,Selectable);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).selected=!1,e}return Selectable}(l.a);k.schema={selected:{type:l.d.Boolean}};var q=k,R=function(e){Object(h.a)(Team,e);var t=Object(f.a)(Team);function Team(){var e;Object(u.a)(this,Team);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).name="unknown",e}return Team}(l.a);R.schema={name:{type:l.d.String}};var P=R,N=n(4),T=n(41),H=n(44),L=n(47),F=n(42),V=function(e){Object(h.a)(DoesDamage,e);var t=Object(f.a)(DoesDamage);function DoesDamage(){var e;Object(u.a)(this,DoesDamage);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).damage=0,e}return DoesDamage}(l.a);V.schema={damage:{type:l.d.Number}};var I=V,W=function(e){Object(h.a)(Position,e);var t=Object(f.a)(Position);function Position(){var e;Object(u.a)(this,Position);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).position=new m,e}return Position}(l.a);W.schema={position:{type:d}};var B=W,U=function(e){Object(h.a)(DebugVector,e);var t=Object(f.a)(DebugVector);function DebugVector(){var e;Object(u.a)(this,DebugVector);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).position=new m,e.direction=new m,e.color="#ff00ff",e}return DebugVector}(l.a);U.schema={position:{type:d},direction:{type:d},color:{type:l.d.String}};var X=U,Y=function(e){Object(h.a)(Attacker,e);var t=Object(f.a)(Attacker);function Attacker(){var e;Object(u.a)(this,Attacker);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).closestUnObstructedTarget=function(t){var n=t.getComponent(B).position,o=t.getComponent(P),r=e.queries.targets.results.filter((function(e){return o.name!==e.getComponent(P).name})),a=e.getTeammates(t),i=r.filter((function(n){return e.inRange(t,n)})).filter((function(n){return!e.isObstructed(t,n,a)}));return T.a((function(e){return e.getComponent(B).position.subtract(n).magnitude()}),i)[0]},e.inRange=function(e,t){var n=e.getComponent(B).position,o=t.getComponent(B).position,r=e.getComponent(g),a=r.projectileSpeed*r.projectileLifetime/1e3;return o.subtract(n).magnitude()<=a},e.isObstructed=function(t,n,o){var r=H.a([t],o);return L.a(e.inTheWayOfTarget(t)(n),r)},e.dv=function(t,n,o){e.world.createEntity().addComponent(X,{color:o,position:t,direction:n})},e.inTheWayOfTarget=F.a((function(e,t,n){var o=e.getComponent(B).position,r=t.getComponent(B).position,a=n.getComponent(B).position,i=a.x,c=a.y,s=n.getComponent(y).radius,u=r.subtract(o),l=u.x,p=u.y,m=l*l+p*p,d=2*(l*(o.x-i)+p*(o.y-c));return 0<=d*d-4*m*((o.x-i)*(o.x-i)+(o.y-c)*(o.y-c)-s*s)})),e.attackTarget=function(t,n,o){var r=n.getMutableComponent(g);r.lastAttack=t;var a=n.getComponent(y).radius,i=n.getComponent(B).position,c=o.getComponent(B).position.subtract(i).unitMut().multiplyScalarMut(r.projectileSpeed),s=c.unit().multiplyScalarMut(a+3).addMut(i);e.world.createEntity().addComponent(y,{color:r.projectileColor,radius:2}).addComponent(I,{damage:r.projectileDamage}).addComponent(w).addComponent(D,{maxSpeed:r.projectileSpeed,direction:c}).addComponent(B,{position:s}).addComponent(M,{createdAt:t,ttl:r.projectileLifetime})},e.getTeammates=function(t){var n=t.getComponent(P).name;return H.a([t],e.queries.attackers.results).filter((function(e){return n===e.getComponent(P).name}))},e}return Object(N.a)(Attacker,[{key:"execute",value:function execute(e,t){var n=this;this.queries.attackers.results.forEach((function(e){var o=e.getComponent(g);if(!(t<o.lastAttack+o.minimumRefactoryPeriod)){var r=n.closestUnObstructedTarget(e);r&&n.attackTarget(t,e,r)}}))}}]),Attacker}(l.b);Y.queries={attackers:{components:[g,y,B,P]},targets:{components:[B,P,y]}};var J=Y,z=function distanceBetween(e,t){var n=e.x-t.x,o=e.y-t.y;return Math.sqrt(n*n+o*o)},G=function positionsAreClose(e,t,n){return z(e,t)<=n},$=function(e){Object(h.a)(RectangleSelector,e);var t=Object(f.a)(RectangleSelector);function RectangleSelector(){var e;Object(u.a)(this,RectangleSelector);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).onMouseDown=function(t){if(0===t.button&&!(e.queries.rectangleSelections.results.length>0)){var n=new m(t.clientX,t.clientY),o=new m(t.clientX,t.clientY);e.world.createEntity().addComponent(A,{startPosition:n,endPosition:o})}},e.onMouseMove=function(t){var n=t.clientX,o=t.clientY;e.queries.rectangleSelections.results.forEach((function(e){var t=e.getComponent(A).endPosition;n!==t.x&&o!==t.y&&e.getMutableComponent(A).endPosition.set(n,o)}))},e.onMouseUp=function(t){0===t.button&&e.queries.rectangleSelections.results.forEach((function(t){var n=t.getComponent(A),o=n.startPosition,r=n.endPosition;t.remove(),G(o,r,5)||e.queries.selectables.results.forEach((function(e){var t=e.getMutableComponent(q),n=e.getComponent(B).position,a=n.x,i=n.y,c=o.x<a&&a<r.x||r.x<a&&a<o.x,s=o.y<i&&i<r.y||r.y<i&&i<o.y;t.selected=c&&s}))}))},e}return Object(N.a)(RectangleSelector,[{key:"execute",value:function execute(e,t){}}]),RectangleSelector}(l.b);$.queries={selectables:{components:[B,q]},rectangleSelections:{components:[A]}};var K=$,Q=function(e){Object(h.a)(Health,e);var t=Object(f.a)(Health);function Health(){var e;Object(u.a)(this,Health);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).maxHealth=0,e.health=0,e}return Health}(l.a);Q.schema={maxHealth:{type:l.d.Number},health:{type:l.d.Number}};var Z=Q,_=function(e){Object(h.a)(Renderer,e);var t=Object(f.a)(Renderer);function Renderer(e,n){var o,r=n.canvas,a=n.colors,i=n.priority;return Object(u.a)(this,Renderer),(o=t.call(this,e,{priority:i})).canvas=void 0,o.colors=void 0,o.ctx=void 0,o.debug=void 0,o.toggleDebug=function(){o.debug=!o.debug},o.clear=function(){o.ctx&&(o.ctx.fillStyle=o.colors.background,o.ctx.fillRect(0,0,o.canvas.width,o.canvas.height))},o.drawCircle=function(e){var t,n;if(o.ctx){var r=o.ctx,a=e.getComponent(y),i=a.color,c=a.radius,s=e.getComponent(B).position,u=null!==(t=null===(n=e.getComponent(q))||void 0===n?void 0:n.selected)&&void 0!==t&&t,l=s.x,p=s.y;r.fillStyle=i,r.beginPath(),r.arc(l,p,c,0,2*Math.PI,!1),r.fill(),r.lineWidth=2,r.strokeStyle="#222",r.stroke(),u&&(r.beginPath(),r.arc(l,p,c+2,0,2*Math.PI,!1),r.lineWidth=2,r.strokeStyle=o.colors.selection,r.stroke())}},o.drawDebugVector=function(e){o.debug&&o.drawVector(e.getComponent(X))},o.drawHealth=function(e){var t=o.ctx;if(t){var n=e.getComponent(B).position,r=e.getComponent(Z),a=r.health,i=r.maxHealth,c=n.x-10,s=n.y+15,u=20*a/i;t.lineWidth=2,t.strokeStyle="#222",t.strokeRect(c,s,20,4),t.lineWidth=0,t.fillStyle=o.colors.selection,t.fillRect(c,s,u,4)}},o.drawRectangleSelection=function(e){if(o.ctx){var t=o.ctx,n=e.getComponent(A),r=n.startPosition,a=n.endPosition;if(!G(r,a,5)){var i=r.x,c=r.y,s=a.x-i,u=a.y-c;t.lineWidth=2,t.strokeStyle=o.colors.selection,t.strokeRect(i,c,s,u)}}},o.drawVector=function(e){var t=e.position,n=e.direction,r=e.color;if(o.ctx){var a=t.add(n),i=a.x,c=a.y,s=o.ctx;s.lineWidth=2,s.strokeStyle=r,s.beginPath(),s.moveTo(t.x,t.y),s.lineTo(i,c),s.stroke()}},o.canvas=r,o.colors=a,o.ctx=o.canvas.getContext("2d"),o.debug=!1,o}return Object(N.a)(Renderer,[{key:"execute",value:function execute(e,t){this.clear(),this.queries.circles.results.forEach(this.drawCircle),this.queries.healths.results.forEach(this.drawHealth),this.queries.rectangleSelections.results.forEach(this.drawRectangleSelection),this.queries.debugVectors.results.forEach(this.drawDebugVector),this.queries.debugVectors.results.forEach((function(e){return e.remove()}))}}]),Renderer}(l.b);_.queries={circles:{components:[y,B]},debugVectors:{components:[X]},healths:{components:[Z,B]},rectangleSelections:{components:[A]}};var ee=_,te=function(e){Object(h.a)(Selector,e);var t=Object(f.a)(Selector);function Selector(){var e;Object(u.a)(this,Selector);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).onMouseDown=function(t){if(0===t.button){var n={x:t.clientX,y:t.clientY};e.selectCircles(n)}},e.selectCircles=function(t){e.deselectAllCircles(),e.queries.circles.results.forEach((function(e){var n=e.getComponent(y).radius,o=e.getComponent(B).position;G(t,o,n)&&(e.getMutableComponent(q).selected=!0)}))},e.deselectAllCircles=function(){e.queries.circles.results.forEach((function(e){e.getComponent(q).selected&&(e.getMutableComponent(q).selected=!1)}))},e}return Object(N.a)(Selector,[{key:"execute",value:function execute(e,t){}}]),Selector}(l.b);te.queries={circles:{components:[y,B,q]}};var ne=te,oe=n(48),re=n(43),ae=F.a((function(e,t){if(e===t)return!1;var n=e.getComponent(y),o=e.getComponent(B),r=t.getComponent(y),a=t.getComponent(B),i=n.radius+r.radius;return G(o.position,a.position,i)})),ie=function(e){Object(h.a)(Stopper,e);var t=Object(f.a)(Stopper);function Stopper(){var e;Object(u.a)(this,Stopper);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).stopIfAtDestination=function(e){var t=e.getComponent(B).position,n=e.getComponent(j).position;G(t,n,1)&&(e.getMutableComponent(D).direction.set(0,0),e.removeComponent(j))},e.stopIfColliding=function(t){var n=oe.a(ae(t),e.queries.collideables.results);if(!re.a(n)){if(t.getMutableComponent(D).direction.set(0,0),t.hasComponent(I)&&n.hasComponent(Z)){var o=t.getComponent(I).damage;n.getMutableComponent(Z).health-=o}t.hasComponent(w)&&t.remove()}},e}return Object(N.a)(Stopper,[{key:"execute",value:function execute(e,t){this.queries.moveables.results.forEach(this.stopIfColliding),this.queries.withDestination.results.forEach(this.stopIfAtDestination)}}]),Stopper}(l.b);ie.queries={collideables:{components:[y,C,B]},moveables:{components:[y,D,B]},withDestination:{components:[j,D,B]}};var ce=ie,se=function(e){Object(h.a)(EnforceLifespan,e);var t=Object(f.a)(EnforceLifespan);function EnforceLifespan(){return Object(u.a)(this,EnforceLifespan),t.apply(this,arguments)}return Object(N.a)(EnforceLifespan,[{key:"execute",value:function execute(e,t){this.queries.withLifepan.results.forEach((function(e){var n=e.getComponent(M),o=n.ttl;n.createdAt+o<t&&e.remove()}))}}]),EnforceLifespan}(l.b);se.queries={withLifepan:{components:[M]}};var ue=se,le=function(e){Object(h.a)(EnforceHealth,e);var t=Object(f.a)(EnforceHealth);function EnforceHealth(){return Object(u.a)(this,EnforceHealth),t.apply(this,arguments)}return Object(N.a)(EnforceHealth,[{key:"execute",value:function execute(e,t){this.queries.withHealth.results.forEach((function(e){e.getComponent(Z).health<=0&&e.remove()}))}}]),EnforceHealth}(l.b);le.queries={withHealth:{components:[Z]}};var pe=le,me=n(49),de=n(46),fe=function(e){Object(h.a)(Boidser,e);var t=Object(f.a)(Boidser);function Boidser(){var e;Object(u.a)(this,Boidser);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).executeEntity=function(t){var n=t.getComponent(B).position,o=t.getMutableComponent(D),r=o.direction,a=o.maxSpeed,i=e.getTeammates(t),c=e.calcDestinationForce(t),s=e.calcSeparationForce(50,t,i),u=e.calcCohesionForce(t,i),l=e.calcAlignmentForce(t,i);if(r.set(0,0).addMut(c).addMut(s).addMut(u.divideScalarMut(1e3)).addMut(l.multiplyScalarMut(10)).limitMut(a),e.world.createEntity().addComponent(X,{color:"#f00",position:n,direction:r}),Number.isNaN(r.x)||Number.isNaN(r.y))throw new Error("divided.x was NaN")},e.calcAlignmentForce=function(e,t){var n=new m(0,0),o=e.getComponent(B).position;return t.forEach((function(e){var t=e.getComponent(B).position,r=e.getComponent(D).direction,a=o.subtract(t).magnitude(),i=r.divideScalar(a);n.addMut(i)})),me.a(t)?n:n.divideScalarMut(t.length)},e.calcAveragePosition=function(e){var t=e.map((function(e){return e.getComponent(B).position})),n=new m(0,0);return t.forEach(n.addMut),me.a(t)?n:n.divideScalarMut(t.length)},e.calcCohesionForce=function(t,n){var o=t.getComponent(B).position;return e.calcAveragePosition(n).subtractMut(o)},e.calcDestinationForce=function(e){if(!e.hasComponent(j))return new m(0,0);var t=e.getComponent(j).position,n=e.getComponent(B).position;return t.subtract(n)},e.calcSeparationForce=function(t,n,o){var r=new m(0,0),a=de.a(e.calcSingleSeparationForce(t)(n),o),i=n.getComponent(B).position;return a.forEach((function(t){e.world.createEntity().addComponent(X,{color:"#0f0",position:i,direction:t})})),a.forEach(r.addMut),me.a(a)?r:r.divideScalar(a.length)},e.calcSingleSeparationForce=F.a((function(e,t,n){var o=t.getComponent(B).position,r=n.getComponent(B).position,a=t.getComponent(D),i=a.minSeparation,c=a.separation,s=o.subtract(r),u=r.subtract(o).limitMut(i).addMut(o).subtractMut(r).magnitude(),l=s.magnitude();return c<u?s.multiplyScalarMut(0):0===u||l<i?s.multiplyScalarMut(Math.pow(10,10)):s.divideScalarMut(u).multiplyScalarMut(e)})),e.getTeammates=function(t){var n=t.getComponent(P).name;return H.a([t],e.queries.entities.results).filter((function(e){return n===e.getComponent(P).name}))},e}return Object(N.a)(Boidser,[{key:"execute",value:function execute(e,t){this.queries.entities.results.forEach(this.executeEntity)}}]),Boidser}(l.b);fe.queries={entities:{components:[D,B,P]}};var he=fe,ve=function(e){Object(h.a)(Debug,e);var t=Object(f.a)(Debug);function Debug(){return Object(u.a)(this,Debug),t.apply(this,arguments)}return Debug}(l.c),ge=function(e){Object(h.a)(DestinationSetter,e);var t=Object(f.a)(DestinationSetter);function DestinationSetter(){var e;Object(u.a)(this,DestinationSetter);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).onMouseDown=function(t){if(2===t.button){var n=t.clientX,o=t.clientY;e.selected().forEach((function(e){e.hasComponent(j)||e.addComponent(j),e.getMutableComponent(j).position.set(n,o)}))}},e.selected=function(){return e.queries.selectables.results.filter((function(e){return e.getComponent(q).selected}))},e}return Object(N.a)(DestinationSetter,[{key:"execute",value:function execute(e,t){}}]),DestinationSetter}(l.b);ge.queries={selectables:{components:[D,q]}};var be=ge,ye=function(e){Object(h.a)(Mover,e);var t=Object(f.a)(Mover);function Mover(){return Object(u.a)(this,Mover),t.apply(this,arguments)}return Object(N.a)(Mover,[{key:"execute",value:function execute(e,t){this.queries.moveables.results.forEach((function(t){var n=t.getMutableComponent(B).position,o=t.getComponent(D).direction,r=o.x*(e/1e3),a=o.y*(e/1e3);n.x+=r,n.y+=a}))}}]),Mover}(l.b);ye.queries={moveables:{components:[D,B]}};var Ce=ye,Se={friendly:"#59cd90",enemy:"#c73e1d",projectile:"#ffe74c",background:"#545e75",selection:"#57b8ff"},je=function Game(e){var t=this,n=e.canvas;Object(u.a)(this,Game),this.world=void 0,this.lastTime=void 0,this.animationFrameRequest=void 0,this.start=function(){for(var e=0;e<10;e++)t.createFriendly(50+50*e,500),t.createEnemy(50+50*e,100);t.run()},this.createEnemy=function(e,n){var o=Se.enemy,r=new m(e,n),a=Se.projectile;t.world.createEntity().addComponent(g,{projectileColor:a,projectileSpeed:200,projectileLifetime:1e3,projectileDamage:10,minimumRefactoryPeriod:500}).addComponent(y,{radius:10,color:o}).addComponent(C).addComponent(Z,{health:100,maxHealth:100}).addComponent(B,{position:r}).addComponent(P,{name:"Enemy"})},this.createFriendly=function(e,n){var o=Se.friendly,r=new m,a=new m(e,n),i=Se.projectile;t.world.createEntity().addComponent(g,{projectileColor:i,projectileSpeed:200,projectileLifetime:1e3,projectileDamage:10,minimumRefactoryPeriod:500}).addComponent(y,{radius:10,color:o}).addComponent(C).addComponent(Z,{health:100,maxHealth:100}).addComponent(D,{direction:r,maxSpeed:100,separation:30,minSeparation:20}).addComponent(B,{position:a}).addComponent(q).addComponent(P,{name:"Friendly"})},this.stop=function(){t.animationFrameRequest&&cancelAnimationFrame(t.animationFrameRequest)},this.toggleDebug=function(){t.world.getSystem(ee).toggleDebug()},this.onMouseDown=function(e){var n=t.world.getSystem(be),o=t.world.getSystem(ne),r=t.world.getSystem(K);n.onMouseDown(e),o.onMouseDown(e),r.onMouseDown(e)},this.onMouseMove=function(e){t.world.getSystem(K).onMouseMove(e)},this.onMouseUp=function(e){t.world.getSystem(K).onMouseUp(e)},this.run=function(){var e=performance.now(),n=e-t.lastTime;t.world.execute(n,e),t.lastTime=e,t.animationFrameRequest=requestAnimationFrame(t.run)},this.lastTime=performance.now(),this.animationFrameRequest=null,this.world=(new l.e).registerSystem(J).registerSystem(he).registerSystem(be).registerSystem(ue).registerSystem(pe).registerSystem(Ce).registerSystem(K).registerSystem(ee,{canvas:n,colors:Se}).registerSystem(ne).registerSystem(ce).registerComponent(g).registerComponent(y).registerComponent(C).registerComponent(ve).registerComponent(X).registerComponent(j).registerComponent(w).registerComponent(I).registerComponent(Z).registerComponent(M).registerComponent(D).registerComponent(B).registerComponent(A).registerComponent(q).registerComponent(P)},we=(n(38),function App(){var e=r.a.useState(null),t=Object(c.a)(e,2),n=t[0],o=t[1],a=r.a.useRef(null);r.a.useEffect((function(){if(n)return a.current=new je({canvas:n}),a.current.start(),function(){var e;null===(e=a.current)||void 0===e||e.stop(),a.current=null}}),[n]),r.a.useEffect((function(){var e=function handleResize(){n&&(n.width=window.innerWidth,n.height=window.innerHeight)};return e(),window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[n]);return Object(s.a)("d",(function(){var e;return null===(e=a.current)||void 0===e?void 0:e.toggleDebug()})),r.a.createElement("div",{className:"App"},r.a.createElement("canvas",{ref:o,onMouseDown:function onMouseDown(e){var t;e.preventDefault(),e.stopPropagation(),null===(t=a.current)||void 0===t||t.onMouseDown(e)},onMouseMove:function onMouseMove(e){var t;null===(t=a.current)||void 0===t||t.onMouseMove(e)},onMouseUp:function onMouseUp(e){var t;null===(t=a.current)||void 0===t||t.onMouseUp(e)},onContextMenu:function onContextMenu(e){return e.preventDefault()}}))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(we,null)),document.getElementById("root")),function unregister(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}()}},[[30,1,2]]]);
//# sourceMappingURL=main.1420d337.chunk.js.map